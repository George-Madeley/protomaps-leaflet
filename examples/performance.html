<html>
    <head>
    </head>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
        <script src="https://unpkg.com/protomaps@latest/dist/protomaps.min.js"></script>
        <!-- <script src="../dist/protomaps.js"></script> -->
        <style>
            #example_1 {
                width: 512px;
                height: 512px;
                background-color:#eee;
                display: block;
            }
        </style>
    </head>
    <body>
        <div>
            <canvas id="example_1"></canvas>
            <span><span id="example_1_elapsed"></span> ms</span>
        </div>
        <script>
        let RUNS = 20
        let canvas = document.getElementById("example_1")
        let map = new protomaps.Static({url:"https://api.protomaps.com/tiles/v2/{z}/{x}/{y}.pbf?key=1003762824b9687f"})

        async function run() {
            return await map.drawCanvas(canvas,[42.3238,-83.0512],11)
        }

        async function benchmark() {
            await run() // first run is irrelevant
            var total = 0
            for (var i = 0; i < RUNS; i++) {
                total += await run()
            }
            document.getElementById("example_1_elapsed").innerHTML = total/RUNS
        }

        benchmark()
        </script>
    </body>
</html>